\section{格式化输出}

\begin{frame}[fragile]\ft{\secname}
\begin{table}
\centering
\caption{格式说明符}
\begin{tabular}{p{2.5cm}|p{7.5cm}} \hline
格式说明符 & ~~~~~~~~输出 \\ \hline\hline 
\lstinline|%a| & 浮点数、十六进制和p-计数法 \\[.03in]
\lstinline|%A| & 浮点数、十六进制和P-计数法 \\[.03in]
\lstinline|%c| & 字符\\[.03in]
\lstinline|%d| & 有符号十进制数\\[.03in] 
\lstinline|%e| & 浮点数、e-计数法\\[.03in]
\lstinline|%E| & 浮点数、E-计数法\\[.03in]
\lstinline|%f| & 浮点数、十进制计数法\\[.03in]
\lstinline|%g| & 根据数值不同自动选 \lstinline|%f| 或 \lstinline|%e| 。 \lstinline|%e| 格式在指数小于-4或大于等于精度时使用\\[.03in]
\lstinline|%G| & 根据数值不同自动选 \lstinline|%f| 或 \lstinline|%E| 。 \lstinline|%E| 格式在指数小于-4或大于等于精度时使用\\\hline
\end{tabular}
\end{table}
\end{frame}

\begin{frame}[fragile]\ft{\secname}
\begin{table}
\centering
\caption{格式说明符}
\begin{tabular}{p{2.5cm}|p{7.5cm}} \hline
格式说明符 & ~~~~~~~~输出 \\ \hline\hline 
\lstinline|%i| & 有符号十进制整数（同\%d）\\[.03in]
\lstinline|%o| & 无符号八进制整数\\[.03in]
\lstinline|%p| & 指针\\[.03in]
\lstinline|%s| & 字符串\\[.03in]
\lstinline|%x| & 使用十六进制数字 \lstinline|0-f| 的无符号十六进制整数\\[.03in]
\lstinline|%X| & 使用十六进制数字 \lstinline|0-F| 的无符号十六进制整数\\[.03in]
\hline
\end{tabular}
\end{table}
\end{frame}

\begin{frame}[fragile]\ft{\secname}
\begin{free}[\lstinline|printf()| 的使用格式]{}
\lstinline|printf(Control-string, item1, item2, ...);|
\end{free} \vspace{0.1in}

\begin{itemize}
\item \lstinline|item1, item2, ...| 是要打印的项目，它们可以是变量，也可以是常量，甚至是在打印之前进行计算的表达式。\\[0.1in]
\item 控制字符串(Control-string)是一个描述项目如何打印的字符串，它为每个要打印的项目包含一个格式说明符。

\end{itemize} \pause 
% \end{frame}

% \begin{frame}[fragile]\ft{\secname}
\begin{figure}
\centering
\begin{tikzpicture}
\def\x{0.5}
\draw[dotted] (0,0) rectangle node[]{\lstinline|printf(|}(3*\x,\x);
\draw[dotted] (3*\x,0) rectangle node[]{\lstinline|"You look great in \%s\\n"|}(13*\x,\x);
\draw[dotted] (13*\x,0) rectangle node[]{\lstinline|,|}(14*\x,\x);
\draw[dotted] (14*\x,0) rectangle node[]{\lstinline|color|}(16*\x,\x);
\draw[dotted] (16*\x,0) rectangle node[]{\lstinline|);|}(17*\x,\x);
\node at (8*\x,0) [below] {\small{控制描述}};
\node at (15*\x,0) [below] {\small{变量列表}};
\end{tikzpicture}
\end{figure} \pause 
% \end{frame}

% \begin{frame}[fragile]\ft{\secname：\lstinline|\%d|}
\begin{free}[注意]{}
不要忘记给控制字符串后列表中的每个项目都使用一个格式说明符。  
\end{free}

\end{frame}

\begin{frame}[fragile]\ft{\secname}
\begin{itemize}
\item 如果只想打印一个语句，则不需要任何格式说明符；\\[0.1in]
\item 如果只想打印数据，则无须加入任何说明内容。\\[0.1in]
\item 想打印 \lstinline|%|，必须使用两个 \lstinline|%%| 符号。
\end{itemize}

\begin{lstlisting}
printf("Once more you open the door!\n");
printf("%s%d\n", "area = ", area);
printf("%d%% = %f\n", 30, 0.3);
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]\ft{\secname：\lstinline|\%d|}
  \lstinputlisting
  {slide04/code/width.c} \pause 
% \end{frame}

% \begin{frame}[fragile]\ft{\secname：\lstinline|\%d|}
\begin{lstlisting}[showspaces=true,basicstyle=\ttfamily\small]
*1000*
*1000*
*      1000*
*1000      *
*0000001000*
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]\ft{\secname：\lstinline|\%d|}
  \begin{lstlisting}[backgroundcolor=\color{red!20}]
%d
  \end{lstlisting}
  按整型数据的实际长度输出 \vspace{.1in}\pause

  \begin{lstlisting}[backgroundcolor=\color{red!20}]
%md
  \end{lstlisting}
  输出字段的宽度为 \lstinline|m|，右对齐
  \begin{itemize}
  \item 若 \lstinline|m| 大于实际宽度，则左端补空格；
  \item 若 \lstinline|m| 小于等于实际宽度，按实际宽度输出。
  \end{itemize} \vspace{.1in}\pause
  
  \begin{lstlisting}[backgroundcolor=\color{red!20}]
%-md
  \end{lstlisting}
  输出字段宽度为 \lstinline|m|，左对齐
  \begin{itemize}
  \item 若 \lstinline|m| 大于实际宽度，右端补空格
  \item 若 \lstinline|m| 小于等于实际宽度，按实际宽度输出。
  \end{itemize}

\end{frame}

\begin{frame}[fragile]\ft{\secname：\lstinline|\%d|}

  \begin{lstlisting}[backgroundcolor=\color{red!20}]
%0md
  \end{lstlisting}  
  输出字段宽度为 \lstinline|m|，右对齐。
  \begin{itemize}
  \item 若 \lstinline|m| 大于实际宽度，右端补 \lstinline|0|；
  \item 若 \lstinline|m| 小于等于实际宽度，按实际宽度输出。
  \end{itemize}

\end{frame}

\begin{frame}[fragile]\ft{\secname}
  \lstinputlisting
  {slide04/code/flags.c}    
\end{frame}

\begin{frame}[fragile]\ft{\secname：\lstinline|\%d|}
\begin{lstlisting}[showspaces=true]
1f 1F 0x1f 0X1F
*42*
* 42*
*-42*
*    6*
*  006*
*00006*
*  006*
\end{lstlisting}
\end{frame}


\begin{frame}[fragile]{\secname：\lstinline|\%d|}

\begin{lstlisting}[backgroundcolor=\color{red!20},showspaces=true] 
% d  
\end{lstlisting}    
    \begin{itemize}
    \item 正值之前产生一个前导空格\\[0.05in]
    \item 在负值之前不产生前导空格\\[0.05in]
    \end{itemize}
    这使得有效位相同的正值和负值以相同字段宽度打印输出。 \vspace{.1in}\pause 

\begin{lstlisting}[backgroundcolor=\color{red!20}] 
%m.nd, %0md, %0m.nd
\end{lstlisting}     
    \begin{itemize}
    \item\lstinline|%5.3d| 用于在整数格式中来产生足够的前导零以填满要求的最小数字位数。\\[0.05in]
    \item \lstinline|%05d| 将会用前导零填满整个字段宽度。\\[0.05in]
    \item 在 \lstinline|%05.3d| 中，0标志和精度说明符同时出现，此时0标志将会忽略。
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{\secname：\lstinline|\%x, \%\#x, \%X, \%\#X|}
\begin{lstlisting}[backgroundcolor=\color{red!20}] 
%x, %#x, %X, %#X
\end{lstlisting}
    \begin{itemize}
    \item \lstinline|%x| 输出 \lstinline|1f| \\[0.05in]
    \item \lstinline|%X| 输出 \lstinline|1F| \\[0.05in]
    \item \lstinline|%#x| 输出 \lstinline|0x1f| \\[0.05in]
    \item \lstinline|%#X| 输出 \lstinline|0X1F|
    \end{itemize}
\end{frame}


\begin{frame}[fragile]\ft{\secname：\lstinline|\%f, \%e, \%E|}
\lstinputlisting[basicstyle=\ttfamily\small]
{slide04/code/floats.c}
\end{frame}

\begin{frame}[fragile]\ft{\secname：\lstinline|\%f, \%e, \%E|}
\begin{lstlisting}[showspaces=true,backgroundcolor=\color{red!20}]
*3852.990000*
*3.852990e+03*
*3852.99*
*3853.0*
*  3852.990*
* 3.853e+03*
* 3.853E+03*
*+3852.99*
*3852.99   *
*0003852.99*
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]\ft{\secname：\lstinline|\%f, \%e, \%E|}
\begin{lstlisting}[backgroundcolor=\color{red!20}]
%m.nf     %m.ne      %m.nE
\end{lstlisting}

\begin{itemize}
\item \lstinline|m| 为字段宽度
\item \lstinline|n| 为小数点右边数字的个数
\end{itemize} \pause 
% \end{frame}

% \begin{frame}[fragile]\ft{\secname：\lstinline|\%f, \%e, \%E|}
\begin{lstlisting}[backgroundcolor=\color{red!20}] 
%.nf
\end{lstlisting}

\begin{itemize}
\item 整数部分以实际长度输出
\item \lstinline|n| 为小数点右边数字的个数
\end{itemize} \pause 
% \end{frame}

% \begin{frame}[fragile]\ft{\secname：\lstinline|\%f, \%e, \%E|}
\begin{lstlisting}[backgroundcolor=\color{red!20}] 
%m.f
\end{lstlisting}

\begin{itemize}
\item 字段宽度为 \lstinline|m|
\item 不输出小数点后的数字
\end{itemize}
\end{frame}


\begin{frame}[fragile]\ft{\secname：\lstinline|\%s|}
  \lstinputlisting
  {slide04/code/strings.c}    \pause 
% \end{frame}

% \begin{frame}[fragile]\ft{\secname：关于字符串的打印}
\begin{lstlisting}[showspaces=true,basicstyle=\ttfamily\small]
*Hello World!*
*   Hello World!*
*          Hello*
*Hello          *
*Hello*
\end{lstlisting}
% \end{frame}

% \begin{frame}[fragile]\ft{\secname：关于字符串的打印}
% \lstinline|%15.5s| 只打印5个字符。修饰符‘-’使文本左对齐输出。
\end{frame}
\begin{frame}[fragile]\ft{\secname：\lstinline|\%f, \%e, \%E|}
\begin{lstlisting}[backgroundcolor=\color{red!20}]
%s 
\end{lstlisting}
按实际宽度输出。\pause 

\begin{lstlisting}[backgroundcolor=\color{red!20}]
%ms 
\end{lstlisting}
输出字段宽度为 \lstinline|m|，右对齐。
\begin{itemize}
\item 若 \lstinline|m| 大于实际宽度，则左端补空格；
\item 若 \lstinline|m| 小于等于实际宽度，则按实际宽度输出。
\end{itemize} \pause 

\begin{lstlisting}[backgroundcolor=\color{red!20}]
%m.ns 
\end{lstlisting}
输出字段宽度为 \lstinline|m|，显示前 \lstinline|n| 个字符，右对齐。
\begin{itemize}
\item 若 \lstinline|m| 大于 \lstinline|n|，则左端补空格；
\item 若 \lstinline|m| 小于等于 \lstinline|n|，则按宽度 \lstinline|n| 输出。
\end{itemize}\pause

\begin{lstlisting}[backgroundcolor=\color{red!20}] 
%.ns
\end{lstlisting}
只显示前 \lstinline|n| 个字符。
\end{frame}

\begin{frame}[fragile]\ft{\secname：\lstinline|printf()|的返回值}
  \lstinputlisting
  {slide04/code/printval.c} \pause 
% \end{frame}

% \begin{frame}[fragile]\ft{\secname：printf()的返回值}
\begin{lstlisting}[backgroundcolor=\color{red!20}]
100 C is water's boiling point.
the printf function printed 32 character.
\end{lstlisting}

\lstinline|printf()| 返回所有打印字符的个数，包括空格和不可见的换行符。
\end{frame}


\begin{frame}[fragile]\ft{\secname：\lstinline|printf()| 中的 \lstinline|\%n|}
在 \lstinline|printf()| 中， 使用 \lstinline|%n| 将获取 \lstinline|%n| 出现之前的所有字符的个数，并将其传递给后面对应的变量。\pause 

\lstinputlisting
{slide04/code/printf_n.c} \pause 

\begin{lstlisting}[backgroundcolor=\color{red!20}]
Hello Wuhan University!
c1 = 12, c2 = 23
\end{lstlisting}
\end{frame}



